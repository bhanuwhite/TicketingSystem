<div class="card">
  <p-table [value]="productsDemo" [tableStyle]="{ 'min-width': '50rem' }">
    <ng-template pTemplate="header">
      <tr>
        <th>Code</th>
        <th>Name</th>
        <th>Category</th>
        <th>Quantity</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-product>
      <tr>
        <td>{{ product?.code }}</td>
        <td>{{ product?.name }}</td>
        <td>{{ product?.category }}</td>
        <td>{{ product?.quantity }}</td>
      </tr>
    </ng-template>
  </p-table>
</div>

<div class="card mb-4 mt-0 p-3">
  <form [formGroup]="addProduct">
    <div class="row mb-4">
      <div class="col-lg-4">
        <label for="integer" class="font-weight-bold d-block mb-2"
          >Select Product</label
        >

        <p-autoComplete
          #autoComplete
          (ngModelChange)="selectProduct($event)"
          formControlName="name"
          [(ngModel)]="selectedCountry"
          [suggestions]="filteredCountries"
          (completeMethod)="filterCountry($event)"
          field="name"
          class="w-100"
          [ngClass]="{
            'is-invalid':
              addProduct.get('name')?.invalid && addProduct.get('name')?.touched
          }"
        ></p-autoComplete>
        <div
          *ngIf="
            addProduct.get('name')?.invalid && addProduct.get('name')?.touched
          "
        >
          <div
            class="p-error"
            *ngIf="addProduct.get('name')?.hasError('required')"
          >
            Product name is required.
          </div>
        </div>
      </div>
      <div class="col-lg-4">
        <label for="number" class="font-weight-bold d-block mb-2"
          >Quantity</label
        >
        <input
          (change)="onQuantityChange($event)"
          pInputText
          type="text"
          class="w-100"
          formControlName="quantity"
          [ngClass]="{
            'is-invalid':
              addProduct.get('quantity')?.invalid &&
              addProduct.get('quantity')?.touched
          }"
        />
        <div
          *ngIf="
            addProduct.get('quantity')?.invalid &&
            addProduct.get('quantity')?.touched
          "
        >
          <div
            class="p-error"
            *ngIf="addProduct.get('quantity')?.hasError('required')"
          >
            Quantity name is required.
          </div>
          <div
            class="p-error"
            *ngIf="addProduct.get('quantity')?.hasError('pattern')"
          >
            This field only allows numbers.
          </div>
        </div>
      </div>
      <div class="col-lg-4">
        <label for="money" class="font-weight-bold block mb-2">Price</label>
        <input
          pInputText
          type="text"
          class="w-100"
          placeholder="Price"
          readonly
          formControlName="price"
        />
      </div>
    </div>

    <div class="row">
      <div class="col-lg-4"></div>
      <div class="col-lg-4">
        <label for="alphabetic" class="font-weight-bold d-block mb-2"
          >Select Tax</label
        >

        <p-dropdown
          class="w-100"
          formControlName="tax"
          [ngClass]="{
            'is-invalid':
              addProduct.get('tax')?.invalid && addProduct.get('tax')?.touched
          }"
        ></p-dropdown>
        <div
          *ngIf="
            addProduct.get('tax')?.invalid && addProduct.get('tax')?.touched
          "
        >
          <div
            class="p-error"
            *ngIf="addProduct.get('tax')?.hasError('required')"
          >
            Tax is required.
          </div>
        </div>
      </div>
      <div class="col-lg-4">
        <label for="alphanumeric" class="font-weight-bold block mb-2"
          >Total</label
        >
        <input pInputText type="text" class="w-100" />
      </div>
    </div>

    <hr class="mt-4 mb-4" />

    <div class="col-lg-12 d-flex justify-content-end">
      <button type="submit" class="btn btn-danger">Add Product</button>
    </div>
  </form>
</div>
